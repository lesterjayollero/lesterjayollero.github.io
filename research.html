<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Research | Lester Jay Ollero</title>
  <meta name="keywords" content="Lester Jay Ollero, Transport Research, Network Modeling, Route Choice, BRT, Urban Mobility">
  <meta name="author" content="Lester Jay Ollero">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    body {
      font-family: "Segoe UI", Roboto, sans-serif;
      color: #222;
      background: #fafafa;
      line-height: 1.7;
      margin: 0;
      padding: 0;
    }
    a { color: #0077b6; text-decoration: none; }
    a:hover { color: #005f8f; text-decoration: underline; }

    /* Navbar */
    .navbar { background: #fff; border-bottom: 1px solid #ddd; position: sticky; top: 0; z-index: 100; width: 100%; }
    .nav-container { display: flex; justify-content: space-between; align-items: center; padding: 12px 24px; max-width: 1100px; margin: 0 auto; }
    .nav-logo { font-size: 1.4em; font-weight: 600; color: #003049; }
    .nav-menu { display: flex; list-style: none; }
    .nav-menu li { margin: 0 12px; }
    .nav-menu a { color: #003049; font-weight: 500; }
    .nav-menu a.active { color: #0077b6; font-weight: 600; border-bottom: 2px solid #0077b6; padding-bottom: 2px; }

    .menu-toggle { display: none; flex-direction: column; cursor: pointer; }
    .menu-toggle .bar { height: 3px; width: 25px; background-color: #003049; margin: 4px 0; border-radius: 3px; }

    @media (max-width: 768px) {
      .menu-toggle { display: flex; }
      .nav-menu { position: fixed; right: -100%; top: 0; flex-direction: column; background: #fff; width: 230px; height: 100%;
        border-left: 1px solid #ddd; padding-top: 70px; transition: right 0.3s ease-in-out; z-index: 200; }
      .nav-menu.active { right: 0; }
      .nav-menu li { margin: 18px 0; text-align: center; }
    }

    /* Page layout */
    .container { max-width: 900px; margin: 50px auto; padding: 0 20px; }
    h1 { color: #003049; font-size: 2em; border-bottom: 3px solid #0077b6; display: inline-block; padding-bottom: 6px; margin-bottom: 20px; }
    h2 { color: #003049; font-size: 1.5em; margin-top: 40px; }

    p, ol { text-align: justify; text-justify: inter-word; }
    .tag { display: inline-block; background: #e3f2fd; color: #005f8f; padding: 5px 12px; border-radius: 20px; font-size: 0.9em;
      margin-right: 6px; margin-bottom: 6px; transition: all 0.2s ease-in-out; }
    .tag:hover { background: #0077b6; color: #fff; cursor: default; }

    .research-section { display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-start; }
    .research-text { flex: 1 1 500px; }
    .research-image { flex: 1 1 300px; text-align: center; }
    .research-image img { width: 100%; max-width: 400px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    ol { margin-left: 20px; }

    footer { text-align: center; padding: 25px 10px; background: #f8f9fa; color: #555; font-size: 0.9em; margin-top: 60px; border-top: 1px solid #ddd; }

    /* Simulation box styling */
    .sim-wrapper { background:#0f1724; border-radius:12px; padding:15px; margin-top:25px; box-shadow:0 4px 20px rgba(0,0,0,0.15); }
    .sim-header { color:#fff; font-size:1.1em; margin-bottom:10px; }
    #simCanvas { width:100%; height:400px; background:linear-gradient(180deg,#071029 0%,#071425 100%); border-radius:8px; display:block; }
    .sim-controls { margin-top:10px; color:#ddd; font-size:0.9em; }
    input[type=range]{width:100%;}
    button{background:transparent;border:1px solid rgba(255,255,255,0.2);padding:6px 12px;border-radius:6px;color:#fff;cursor:pointer;margin-right:6px;}
    button:hover{background:rgba(255,255,255,0.1);}
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">Lester Jay Ollero</a>
      <div class="menu-toggle" id="mobile-menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
      <ul class="nav-menu">
        <li><a href="index.html#home">Home</a></li>
        <li><a href="research.html" class="active">Research</a></li>
        <li><a href="publications.html">Publications</a></li>
        <li><a href="awards.html">Awards</a></li>
        <li><a href="projects.html">Projects</a></li>
      </ul>
    </div>
  </nav>

  <!-- Content -->
  <div class="container">
    <h1>Research Overview</h1>
    <p>My main research interest centers on the development of advanced methodologies for modeling and analyzing the operational performance of public transport systems within complex urban networks.</p>
    <p>A key area of my research involves assessing exclusive bus lanes ...</p>

    <h2>Modeling of an Exclusive Bus Lane</h2>
    <!-- ... your earlier sections unchanged ... -->

    <h2>Bus Bunching</h2>
    <div class="tags">
      <span class="tag">#EDSA Busway</span>
      <span class="tag">#Telematics</span>
      <span class="tag">#Microsimulation</span>
      <span class="tag">#Mobile Application</span>
    </div>

    <!-- === Embedded Simulation === -->
    <div class="sim-wrapper">
      <div class="sim-header">Interactive Closed-Loop Bus Simulation</div>
      <canvas id="simCanvas" width="700" height="400"></canvas>
      <div class="sim-controls">
        <label>Buses:</label><input id="busCount" type="range" min="1" max="20" value="6">
        <label>Stops:</label><input id="stopCount" type="range" min="4" max="20" value="12">
        <label>Speed:</label><input id="speed" type="range" min="0.25" max="5" step="0.25" value="1">
        <button id="pause">Pause</button><button id="reset">Reset</button>
      </div>
    </div>
  </div>

  <footer>Â© 2025 Lester Jay Ollero</footer>

  <!-- Navbar toggle script -->
  <script>
    const menu = document.querySelector('#mobile-menu');
    const navMenu = document.querySelector('.nav-menu');
    const body = document.querySelector('body');
    menu.addEventListener('click',()=>{navMenu.classList.toggle('active');body.classList.toggle('menu-open');});
    document.querySelectorAll('.nav-menu a').forEach(link=>{
      link.addEventListener('click',()=>{navMenu.classList.remove('active');body.classList.remove('menu-open');});
    });
  </script>

  <!-- Bus Simulation Script -->
  <script>
  (() => {
    const canvas=document.getElementById('simCanvas'),ctx=canvas.getContext('2d');
    const busCountInput=document.getElementById('busCount');
    const stopCountInput=document.getElementById('stopCount');
    const speedInput=document.getElementById('speed');
    const pauseBtn=document.getElementById('pause');
    const resetBtn=document.getElementById('reset');

    let sim={running:true,time:0,speed:1,buses:[],stops:[],busCount:6,stopCount:12};
    const W=canvas.width,H=canvas.height,cx=W/2,cy=H/2,rx=W*0.35,ry=H*0.25;

    function pointAt(t){const a=2*Math.PI*t;return{x:cx+rx*Math.cos(a),y:cy+ry*Math.sin(a)};}
    function reset(){
      sim.busCount=parseInt(busCountInput.value);
      sim.stopCount=parseInt(stopCountInput.value);
      sim.speed=parseFloat(speedInput.value);
      sim.buses=[];sim.stops=[];
      for(let i=0;i<sim.stopCount;i++){const p=pointAt(i/sim.stopCount);sim.stops.push({t:i/sim.stopCount,x:p.x,y:p.y,wait:Math.floor(Math.random()*3)});}
      for(let i=0;i<sim.busCount;i++){sim.buses.push({t:i/sim.busCount,speed:0.02+Math.random()*0.01,dwell:0,color:`hsl(${(i*40)%360} 70% 60%)`});}
    }

    function step(dt){
      sim.time+=dt*sim.speed;const minGap=1/sim.busCount*0.6;
      for(let i=0;i<sim.buses.length;i++){
        const b=sim.buses[i];
        if(b.dwell>0){b.dwell-=dt;continue;}
        let newT=(b.t+b.speed*dt*sim.speed)%1;
        const ahead=sim.buses[(i+1)%sim.buses.length];let gap=ahead.t-newT;if(gap<0)gap+=1;if(gap<minGap)newT=b.t;b.t=newT;
        for(const s of sim.stops){let d=Math.hypot(pointAt(b.t).x-s.x,pointAt(b.t).y-s.y);if(d<15&&s.wait>0){s.wait=0;b.dwell=0.5;}}
      }
      for(const s of sim.stops){if(Math.random()<0.02*dt*sim.speed)s.wait++;}
    }

    function draw(){
      ctx.clearRect(0,0,W,H);
      ctx.strokeStyle='rgba(255,255,255,0.1)';ctx.lineWidth=8;
      ctx.beginPath();for(let i=0;i<=100;i++){const p=pointAt(i/100);if(i===0)ctx.moveTo(p.x,p.y);else ctx.lineTo(p.x,p.y);}ctx.stroke();
      for(const s of sim.stops){const count=Math.min(5,s.wait);
        for(let j=0;j<count;j++){const a=j*0.4;const x2=s.x+Math.cos(a)*15,y2=s.y+Math.sin(a)*15;
          ctx.beginPath();ctx.moveTo(s.x,s.y);ctx.lineTo(x2,y2);ctx.strokeStyle='rgba(255,209,102,0.3)';ctx.lineWidth=2;ctx.stroke();}
        ctx.beginPath();ctx.arc(s.x,s.y,4,0,Math.PI*2);ctx.fillStyle='#fff';ctx.fill();
      }
      for(const b of sim.buses){const p=pointAt(b.t);ctx.beginPath();ctx.arc(p.x,p.y,6,0,Math.PI*2);ctx.fillStyle=b.color;ctx.fill();}
    }

    let last=performance.now();
    function loop(now){const dt=(now-last)/1000;last=now;if(sim.running)step(dt);draw();requestAnimationFrame(loop);}
    pauseBtn.onclick=()=>{sim.running=!sim.running;pauseBtn.textContent=sim.running?'Pause':'Play';};
    resetBtn.onclick=()=>reset();
    busCountInput.oninput=()=>reset();
    stopCountInput.oninput=()=>reset();
    speedInput.oninput=()=>{sim.speed=parseFloat(speedInput.value);};
    reset();loop(performance.now());
  })();
  </script>
</body>
</html>
